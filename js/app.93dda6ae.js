(function(t){function e(e){for(var r,a,u=e[0],s=e[1],c=e[2],l=0,h=[];l<u.length;l++)a=u[l],o[a]&&h.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);f&&f(e);while(h.length)h.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,u=1;u<n.length;u++){var s=n[u];0!==o[s]&&(r=!1)}r&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},o={app:0},i=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],s=u.push.bind(u);u.push=e,u=u.slice();for(var c=0;c<u.length;c++)e(u[c]);var f=s;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var r=n("c21b"),o=n.n(r);o.a},2427:function(t,e,n){"use strict";n.r(e);n("7514"),n("ac6a"),n("cadf"),n("551c"),n("097d");var r=n("ddc8");function o(t){var e=new r["a"](t);return{isEmpty:i,size:o,pop:u,find:n,insert:a};function n(t){return e.find(t)}function o(){return e.size}function i(){return e.isEmpty()}function a(t){e.add(t.point,t)}function u(){var t=e.pop();return t&&t.data}}n("7f7f"),n("c5f6");var i=1e-9;function a(t,e,n){var r=t.from.y-n,o=n-t.to.y,a=t.to.y-t.from.y;if(Math.abs(r)<i)return Math.abs(a)<i?e<=t.from.x?t.from.x:e>t.to.x?t.to.x:e:t.from.x;var u,s=t.to.x-t.from.x;return r>=o?(u=r*(s/a),t.from.x-u):(u=o*(s/a),t.to.x+u)}function u(t,e){var n=t/(Math.abs(t)+Math.abs(e));return e<0?n-1:1-n}function s(t,e){var n=t.from,r=e.from,o=n.x,i=n.y,a=r.x,u=r.y,s=t.dx,c=t.dy,f=e.dx,l=e.dy,h=s*l-f*c,d=(c*(o-a)-s*(i-u))/h;if(!(d<0||d>1)){var m=(f*(u-i)+l*(o-a))/h;return m>=0&&m<=1?{x:o-m*s,y:i-m*c}:void 0}}function c(t,e){return Math.abs(t.x-e.x)<i&&Math.abs(t.y-e.y)<i}function f(t,e){var n,o,i,u,s=!1,f=new r["a"](d),l={beforeLeft:null,left:null,right:null,afterRight:null},h={left:null,right:null};return{insertSegments:E,deleteSegments:_,getLeftRightPoint:v,getBoundarySegments:m,findSegmentsWithPoint:p,status:f,checkDuplicate:w,printStatus:b,getLastPoint:function(){return{x:i,y:n}}};function d(t,r){if(t===r)return 0;var o=a(t,i,n),u=a(r,i,n),c=o-u;if(Math.abs(c)>=e)return c;var f=Math.abs(t.dy)<e,l=Math.abs(r.dy)<e;if(f&&l)return r.to.x-t.to.x;if(f)return s?-1:1;if(l)return s?r.from.x>=i?-1:1:-1;var h=t.angle,d=r.angle;if(Math.abs(h-d)>=e)return s?h-d:d-h;var m=t.from.y-r.from.y;return Math.abs(m)>=e?-m:(m=t.to.y-r.to.y,Math.abs(m)>=e?-m:0)}function m(e,n){var r,o,i,a=e.length;for(r=o=a>0?e[0]:n[0],i=1;i<a;++i){var u=e[i],s=d(r,u);s>0&&(r=u),s=d(o,u),s<0&&(o=u)}var c=a>0?0:1;for(i=c;i<n.length;++i)u=n[i],s=d(r,u),s>0&&(r=u),s=d(o,u),s<0&&(o=u);var h=f.find(r);h||t("Left is missing. Precision error?");var m=f.find(o);m||t("Right is missing. Precision error?");var v=h&&f.prev(h),p=m&&f.next(m);while(p&&0===m.key.dy&&0===p.key.dy)p=f.next(p);return l.beforeLeft=v&&v.key,l.left=h&&h.key,l.right=m&&m.key,l.afterRight=p&&p.key,l}function v(t){var e,n=f._root,r=Number.POSITIVE_INFINITY;while(n){var o=a(n.key,t.x,t.y),i=t.x-o;if(i>=0){if(!(i<r))break;r=i,e=n,n=n.left,!1}else{if(!(-i<r))break;!0,r=-i,e=n,n=n.right}}h.left=e&&e.key;var u=e&&f.next(e);return h.right=u&&u.key,h}function p(t,n){var r=f._root;while(r){var o=a(r.key,t.x,t.y),i=t.x-o;if(Math.abs(i)<e){g(r,t,n);break}r=i<0?r.left:r.right}}function g(t,e,n){n(t.key),y(t.left,e,n),x(t.right,e,n)}function y(t,n,r){if(t){var o=a(t.key,n.x,n.y),i=n.x-o;Math.abs(i)<e?g(t,n,r):y(t.right,n,r)}}function x(t,n,r){if(t){var o=a(t.key,n.x,n.y),i=n.x-o;Math.abs(i)<e?g(t,n,r):x(t.left,n,r)}}function w(){var e;f.forEach(function(n){var r=n.key;e&&c(e.from,r.from)&&c(e.to,r.to)&&t("Duplicate key in the status! This may be caused by Floating Point rounding error"),e=r})}function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";console.log(t,"status line: ",i,n),f.forEach(function(t){var e=a(t.key,i,n);console.log(e+" "+t.key.name)})}function E(t,e,r){var o;n=r.y,i=r.x;for(var a=0;a<t.length;++a)o=t[a],f.add(o);for(a=0;a<e.length;++a)o=e[a],f.add(o)}function _(e,r,a){var c,l=f._size;for(u=i,o=n,n=a.y,i=a.x,s=!0,c=0;c<e.length;++c)T(e[c],a);for(c=0;c<r.length;++c)T(r[c],a);s=!1,f._size!==l-r.length-e.length&&t("Segments were not removed from a tree properly. Precision error?")}function T(t,e){f.find(t)?f.remove(t):(i=u,n=o,f.find(t)&&f.remove(t),n=e.y,i=e.x)}}var l=n("c665"),h=function t(e,n){Object(l["a"])(this,t),this.point=e,n&&(this.from=[n])},d=[];function m(t,e){var n,r,a,l=[],m=e&&e.onFound||S,x=e&&e.onError||p,w=o(y),b=f(x,i);return t.forEach(C),{run:E,step:_,addSegment:C,eventQueue:w,sweepStatus:b,results:l};function E(){while(!w.isEmpty()){var t=w.pop();if(T(t))return}return l}function _(){if(!w.isEmpty()){var t=w.pop();return T(t),!0}return!1}function T(t){a=t.point;var e=t.from||d;n=r=void 0,b.findSegmentsWithPoint(a,A),n||(n=d),r||(r=d);var o,i,u=e.length,s=r.length,c=n.length,f=u+s+c>1,l=!f&&0===u&&0===c&&s>0;if((f||l)&&(t.isReported=!0,m(a,g(r,g(n,e)))))return!0;b.deleteSegments(n,r,a),b.insertSegments(r,e,a);var h=u+s===0;if(h){var v=b.getLeftRightPoint(a);if(o=v.left,!o)return;if(i=v.right,!i)return;P(o,i,t)}else{var p=b.getBoundarySegments(e,r);P(p.beforeLeft,p.left,t),P(p.right,p.afterRight,t)}return!1}function A(t){c(t.to,a)?n?n.push(t):n=[t]:c(t.from,a)||(r?r.push(t):r=[t])}function P(t,e,n){if(t&&e){var r=s(t,e);if(r){var o=n.point.y-r.y;if(!(o<-i)&&!(Math.abs(o)<i&&r.x<=n.point.x)){v(r);var a=w.find(r);if(a&&a.isReported)x("We already reported this event.");else if(!a){var u=new h(r);w.insert(u)}}}}}function S(t,e){l.push({point:t,segments:e})}function C(t){var e=t.from,n=t.to;v(e),v(n);var r=e.y-n.y;if(Math.abs(r)<1e-5&&(e.y=n.y,t.dy=0),e.y<n.y||e.y===n.y&&e.x>n.x){var o=e;e=t.from=n,n=t.to=o}t.dy=e.y-n.y,t.dx=e.x-n.x,t.angle=u(t.dy,t.dx);var i=t.dy===t.dx&&0===t.dy,a=w.find(e);if(a&&!i){var s=a.data.from;if(s)for(var f=0;f<s.length;++f){var l=s[f];if(c(l.to,n))return m(l.from,[l.from,l.to]),void m(l.to,[l.from,l.to])}}if(i){p=new h(n);w.insert(p)}else{if(a)a.data.from?a.data.from.push(t):a.data.from=[t];else{var d=new h(e,t);w.insert(d)}var p=new h(n);w.insert(p)}}}function v(t){Math.abs(t.x)<i&&(t.x=0),Math.abs(t.y)<i&&(t.y=0)}function p(t){throw new Error(t)}function g(t,e){return t?e?t.concat(e):t:e}function y(t,e){var n=e.y-t.y;return Math.abs(n)<i&&(n=t.x-e.x,Math.abs(n)<i&&(n=0)),n}function x(t,e){var n=t.from,r=e.from,o=n.x,i=n.y,a=r.x,u=r.y,s=t.from.x-t.to.x,c=t.from.y-t.to.y,f=e.from.x-e.to.x,l=e.from.y-e.to.y,h=s*l-f*c,d=(c*(o-a)-s*(i-u))/h;if(!(d<0||d>1)){var m=(f*(u-i)+l*(o-a))/h;return m>=0&&m<=1?{x:o-m*s,y:i-m*c}:void 0}}function w(t,e){var n,r=[],o=e&&e.onFound||u;return{run:a,results:r,step:i};function i(){n||(n={i:0});for(var e=t[n.i],r=n.i+1;r<t.length;++r){var i=t[r],a=x(e,i);if(a&&o(a,[e,i]))return}return n.i+=1,n.i<t.length}function a(){for(var e=0;e<t.length;++e)for(var n=t[e],i=e+1;i<t.length;++i){var a=t[i],u=x(n,a);if(u&&o(u,[n,a]))return}return r}function u(t,e){r.push({point:t,segments:e})}}n("386d");var b=n("9a36");function E(t,e){var n,r=[],o=e&&e.onFound||f,i=new b["a"](t.length);return t.forEach(c),i.finish(),{run:a,step:s,results:r,checkIntersection:u};function a(){for(var e=0;e<t.length;++e)if(u(t[e],e))return;return r}function u(e,n){var r,a=e.from.x,u=e.to.x,s=e.from.y,c=e.to.y;a>u&&(r=a,a=u,u=r),s>c&&(r=s,s=c,c=r);for(var f=i.search(a,s,u,c),l=0;l<f.length;++l){var h=f[l];if(!(h<=n)){var d=t[h],m=x(d,e);if(m&&o(m,[e,d]))return!0}}}function s(){n||(n={i:0});var e=t[n.i];return u(e,n.i),n.i+=1,n.i<t.length}function c(t){var e,n=t.from.x,r=t.to.x,o=t.from.y,a=t.to.y;n>r&&(e=n,n=r,r=e),o>a&&(e=o,o=a,a=e),i.add(n,o,r,a)}function f(t,e){r.push({point:t,segments:e})}}n.d(e,"sweep",function(){return m}),n.d(e,"brute",function(){return w}),n.d(e,"bush",function(){return E})},"56d7":function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"random",function(){return Y}),n.d(r,"parallelSlanted",function(){return O}),n.d(r,"sparse",function(){return X}),n.d(r,"triangle",function(){return z}),n.d(r,"cube",function(){return j}),n.d(r,"grid",function(){return W}),n.d(r,"drunkgrid",function(){return q}),n.d(r,"complete",function(){return V}),n.d(r,"splash",function(){return L}),n.d(r,"island",function(){return F});n("fca0"),n("c5f6"),n("5df2"),n("ac6a"),n("4f7f"),n("cadf"),n("551c"),n("097d");var o=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t._m(0),t.showLoading?t._e():n("div",[n("a",{staticClass:"action",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.generateNew()}}},[t._v("Generate New Demo")])]),t.showMetrics?n("div",{staticClass:"results"},[n("div",[n("strong",[t._v(t._s(t.linesCount))]),t._v(" lines. Found "),n("strong",[t._v(t._s(t.found))]),t._v(" intersections in "),n("strong",[t._v(t._s(t.elapsed))])])]):t._e(),t.showLoading?n("div",{staticClass:"loading-container"},[n("div",{staticClass:"loader"},[t._v("Finding intersections...")]),n("div",{staticClass:"label"},[t._v("Finding intersections...")])]):t._e(),t.error?n("div",{staticClass:"error"},[t._v("\n    Asserting failed in sweep line.\n  ")]):t._e(),n("a",{staticClass:"info",attrs:{href:"https://github.com/anvaka/isect"}},[t._v("Source code")])])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h3",[n("strong",[t._v("isect")]),t._v(" - intersection detection library")])}],u={error:null,showMetrics:!1,showLoading:!1,elapsed:0,found:0,linesCount:0},s=(n("7f7f"),n("d9da")),c=s(42),f=[{name:"random",algorithm:["brute","bush"],args:[{min:100,max:500},{min:100,max:200}]},{name:"complete",algorithm:["brute","bush"],args:[{min:10,max:40},function(t){return Math.round((10+c.gaussian())*t.p0)}]},{name:"cube",algorithm:["brute","bush"],args:[{min:100,max:150},function(){return Math.round(10+c.gaussian())}]},{name:"drunkgrid",algorithm:["brute","bush"],args:[{min:10,max:150},function(t){var e=Math.round(10*Math.random())+1;return 0===e?0:(t.p0>20&&e<1&&(e=3),e)}]},{name:"sparse",algorithm:["bush","bush","sweep"],args:[{min:50,max:300}]},{name:"triangle",algorithm:function(t){return t.p1>7?"brute":"bush"},args:[{min:10,max:30},{min:1,max:20}]},{name:"splash",algorithm:["sweep","bush"],args:[{min:10,max:50},{min:40,max:70}]},{name:"island",algorithm:["sweep","bush"],args:[{min:3,max:10},{min:6,max:11}]}];function l(){var t=Math.round(Math.random()*(f.length-1)),e=f[t],n={generator:e.name};e.args.forEach(function(t,e){var r="p".concat(e);n[r]="function"===typeof t?t(n):Math.round(Math.random()*(t.max-t.min)+t.min)});var r="sweep";if(Array.isArray(e.algorithm)){var o=Math.round(Math.random()*(e.algorithm.length-1));r=e.algorithm[o]}else"function"===typeof e.algorithm?r=e.algorithm(n):"string"===typeof e.algorithm&&(r=e.algorithm);return n.algorithm=r,n}var h=n("00c7"),d=h({}),m=d,v={name:"app",props:["state"],data:function(){return u},mounted:function(){m.fire("app-loaded")},methods:{generateNew:function(){this.showLoading=!0,this.showMetrics=!1;var t=l();m.fire("change-qs",t)}}},p=v,g=(n("034f"),n("2877")),y=Object(g["a"])(p,i,a,!1,null,null,null);y.options.__file="App.vue";var x=y.exports,w=(n("6b54"),n("a481"),n("c665")),b=n("aa9a"),E=function(){function t(){Object(w["a"])(this,t),this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY}return Object(b["a"])(t,[{key:"growBy",value:function(t){this.minX-=t,this.minY-=t,this.maxX+=t,this.maxY+=t}},{key:"addPoint",value:function(t,e){if(void 0===t)throw new Error("Point is not defined");var n=t,r=e;void 0===r&&(n=t.x,r=t.y),n<this.minX&&(this.minX=n),n>this.maxX&&(this.maxX=n),r<this.minY&&(this.minY=r),r>this.maxY&&(this.maxY=r)}},{key:"addRect",value:function(t){if(!t)throw new Error("rect is not defined");this.addPoint(t.left,t.top),this.addPoint(t.right,t.top),this.addPoint(t.left,t.bottom),this.addPoint(t.right,t.bottom)}},{key:"merge",value:function(t){t.minX<this.minX&&(this.minX=t.minX),t.minY<this.minY&&(this.minY=t.minY),t.maxX>this.maxX&&(this.maxX=t.maxX),t.maxY>this.maxY&&(this.maxY=t.maxY)}},{key:"left",get:function(){return this.minX}},{key:"top",get:function(){return this.minY}},{key:"right",get:function(){return this.maxX}},{key:"bottom",get:function(){return this.maxY}},{key:"width",get:function(){return this.maxX-this.minX}},{key:"height",get:function(){return this.maxY-this.minY}},{key:"cx",get:function(){return(this.minX+this.maxX)/2}},{key:"cy",get:function(){return(this.minY+this.maxY)/2}}]),t}(),_=P,T=n("2427"),A=n("e924");function P(t,e){var n=t.lines,r=t.isAsync,o=t.algorithm,i=A.scene(e);i.setClearColor(12/255,24/255,52/255,1);var a=new E;n.forEach(function(t){a.addPoint(t.from),a.addPoint(t.to)});var s=i.getPixelRatio(),c=a.left/s,f=a.top/s;i.setViewBox({left:c,top:f,right:c+a.width/s,bottom:f+a.height/s});var l,h,d=new A.WireCollection(n.length);d.color.r=238/255,d.color.g=238/255,d.color.b=238/255,d.color.a=.9,n.forEach(function(t){d.add({from:t.from,to:t.to})}),i.appendChild(d);var m,v={},p=0;u.showMetrics=!1,u.showLoading=!0;var g=setTimeout(y,80);return{dispose:P};function y(){u.error=null,r?b():x(),u.showLoading=!1,u.showMetrics=!0}function x(){var t=window.performance.now();l=T[o](n,{onError:w});try{var e=l.run()}catch(t){console.error(t),e=T.brute(n).run()}var r=window.performance.now()-t;console.log("finished in "+r+"ms"),e&&(console.log("found "+e.length+" intersections"),_(r),R(e))}function w(t){throw u.error="Rounding error detected",M(l.sweepStatus),R(l.results),new Error(t)}function b(){var t=performance.now();l=T[o](n,{onError:w});var e=performance.now();p+=e-t,_(p),m=requestAnimationFrame(C),window.next=function(){var t=l.step();return l.sweepStatus&&(M(l.sweepStatus),l.sweepStatus.printStatus()),R(l.results),t}}function _(t){u.found=S(l.results.length),u.elapsed=Math.round(100*t)/100+"ms",u.linesCount=S(n.length)}function P(){m&&(cancelAnimationFrame(m),m=0),i.dispose(),clearTimeout(g),g=0}function C(){for(var e,n=performance.now(),r=0;r<t.stepsPerFrame;++r)e=l.step();var o=performance.now();p+=o-n,_(p),M(l.sweepStatus),R(l.results),m=e?requestAnimationFrame(C):null}function M(t){if(t){var e=t.getLastPoint();v.point&&i.removeChild(v.point),v.point=new A.PointCollection(1);var n=v.point.add(e);n.setColor({r:1,g:0,b:0}),i.appendChild(v.point),v.line&&i.removeChild(v.line),v.line=new A.WireCollection(1),v.line.color={r:.1,g:1,b:1,a:.9},v.line.add({from:{x:-1e3,y:e.y},to:{x:1e3,y:e.y}}),i.appendChild(v.line),v.segments&&i.removeChild(v.segments);var r=t.status.keys();v.segments=new A.WireCollection(r.length),v.segments.color={r:.1,g:1,b:0,a:.9},r.forEach(function(t){v.segments.add({from:t.from,to:t.to})}),i.appendChild(v.segments)}}function R(t){h&&(i.removeChild(h),h=null),t.length>0&&(h=new A.PointCollection(t.length),t.forEach(function(t,e){var n=h.add(t.point,e);n.setColor({r:163/244,g:597/255,b:597/255})}),i.appendChild(h))}}function S(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var C=n("d9da"),M=+new Date,R=C(M);function L(t,e){for(var n=[],r=0;r<t;++r)for(var o=R.gaussian()*e,i=R.gaussian()*Math.PI*2,a=k({x:R.gaussian(),y:R.gaussian()},{x:o*Math.cos(i),y:o*Math.sin(i)},7),u=1;u<a.length;++u)n.push({from:a[u-1],to:a[u]});return n}function F(t,e){for(var n=100*Math.sqrt(e),r=2*Math.PI/t,o=R.gaussian(),i=[],a={x:n*Math.cos(o),y:n*Math.sin(o)},u=a,s=0;s<t;++s){n=100*R.nextDouble(),o+=r;for(var c=s<t-1?{x:n*Math.cos(o),y:n*Math.sin(o)}:a,f=k(u,c,e),l=1;l<f.length;++l)i.push({from:f[l-1],to:f[l]});u=c}return i}function k(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=[t,e],o=e.x-t.x,i=e.y-t.y,a=Math.sqrt(o*o+i*i),u=a,s=0;s<n;++s){for(var c=[],f=1;f<r.length;f+=1){var l=r[f-1],h=D(l,r[f],Math.sqrt(u));c.push(l,h)}c.push(r[r.length-1]),u/=2,r=c}return r}function D(t,e,n){return{x:.5*(t.x+e.x)+R.gaussian()*n,y:.5*(t.y+e.y)+R.gaussian()*n}}var I=n("d9da"),B=+new Date,N=I(B);function Y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2?arguments[2]:void 0;n=1536687392180,void 0!==n&&(N=I(n));for(var r=[],o=0;o<t;++o)r.push({from:{x:(N.nextDouble()-.5)*e,y:(N.nextDouble()-.5)*e},to:{x:(N.nextDouble()-.5)*e,y:(N.nextDouble()-.5)*e}});return r}function O(t){for(var e=[],n=0;n<t;++n){var r=-n,o=n;e.push({from:{x:r,y:o},to:{x:n,y:n+n}})}return e}function X(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,e=[],n=t,r=t,o=0;o<n;++o)for(var i=0;i<r;++i){var a=10*i,u=10*o,s=N.gaussian();e.push({from:{x:a,y:u},to:{x:a+10*Math.cos(s),y:u+10*Math.sin(s)}})}return e}function z(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=[],r=5,o=N.nextDouble()<.5?1:0,i=0;i<t;++i)for(var a=0;a<t;++a){var u=r*i,s=r*a,c=i%2===o?i:a,f=Math.PI*(c/t-N.gaussian());l(u,s,e,f)}return n;function l(t,e,r,o){var i={x:t+r/2,y:e-r/2},a=U({x:t,y:e},i,o),u=U({x:t+r,y:e},i,o),s=U({x:t+r/2,y:e-r},i,o);n.push({from:{x:a.x,y:a.y},to:{x:u.x,y:u.y},name:"B".concat(t,",").concat(e)},{from:{x:u.x,y:u.y},to:{x:s.x,y:s.y},name:"U".concat(t,",").concat(e)},{from:{x:s.x,y:s.y},to:{x:a.x,y:a.y},name:"D".concat(t,",").concat(e)})}}function U(t,e,n){t.x-=e.x,t.y-=e.y;var r=Math.cos(n)*t.x-t.y*Math.sin(n)+e.x,o=Math.sin(n)*t.x+t.y*Math.cos(n)+e.y;return{x:r,y:o}}function j(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=0,r=4,o=Math.PI/t,i=[],a=0;a<t;++a)n+=o+N.gaussian()*e,u(n,r),r+=N.gaussian()*e;return i;function u(t,e){var n=Math.cos(t)*e,r=Math.sin(t)*e;i.push({from:{x:n,y:r},to:{x:-r,y:n}},{from:{x:-r,y:n},to:{x:-n,y:-r}},{from:{x:-n,y:-r},to:{x:r,y:-n}},{from:{x:r,y:-n},to:{x:n,y:r}})}}function W(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=[],r=0,o=-.3,i=0;i<t;i+=1)n.push({name:"h"+i,from:{x:r,y:i+o},to:{x:r+(e-1),y:i+o}});for(i=0;i<e;i+=1)n.push({name:"v"+i,from:{x:r+i,y:o},to:{x:r+i,y:t-1+o}});return n}function q(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=[],r=-2*e,o=-2*e,i=0;i<t;i+=1)n.push({name:"h"+i,from:{x:r+N.gaussian()*e,y:i+o+N.gaussian()*e},to:{x:r+(t-1)+N.gaussian()*e,y:i+o+N.gaussian()*e}}),n.push({name:"v"+i,from:{x:r+i+N.gaussian()*e,y:o+N.gaussian()*e},to:{x:r+i+N.gaussian()*e,y:t-1+o+N.gaussian()*e}});return n}function V(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=2*Math.PI/t,r=[],o=new Set,i=0;i<t;++i)for(var a=n*i,u=Math.cos(a)*e/2,s=Math.sin(a)*e/2,c=0;c<t;++c)if(c!==i){var f=Math.cos(n*c)*e/2,l=Math.sin(n*c)*e/2,h="".concat(i,",").concat(c),d={name:h,from:{x:u,y:s},to:{x:f,y:l}},m=v(i,c);o.has(m)||(r.push(d),o.add(m))}return r;function v(t,e){return t<e?t+";"+e:e+";"+t}}var G=n("9cf4"),H=n.n(G),Z=new Set(["brute","bush","sweep"]),J=H()({isAsync:!1,p0:150,p1:4,generator:"drunkgrid",algorithm:"brute"},{useSearch:!0});J.onChange(tt),m.on("app-loaded",Q),m.on("change-qs",function(t){J.set(t),tt(t)});var $,K=et(J.get());function Q(){$=_(K,document.getElementById("scene"))}function tt(t){t.showLoading=!0,t.showMetrics=!1,K=et(t),$&&$.dispose(),$=_(K,document.getElementById("scene"))}function et(t){var e=t.generator;e in r||(e="drunkgrid");var n=nt(t.p0,50),o=nt(t.p1,4),i=r[e](n,o);window.lines=i;var a=t.isAsync,u=nt(t.stepsPerFrame,20);return{lines:i,isAsync:a,stepsPerFrame:u,algorithm:Z.has(t.algorithm)?t.algorithm:"bush"}}function nt(t,e){var n=Number.parseFloat(t);return Number.isFinite(n)?n:e}o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(x)}}).$mount("#app")},c21b:function(t,e,n){},e924:function(t,e,n){"use strict";n.r(e),n.d(e,"scene",function(){return _t}),n.d(e,"PointCollection",function(){return Vt}),n.d(e,"Point",function(){return Gt}),n.d(e,"LineCollection",function(){return te}),n.d(e,"WireCollection",function(){return ne}),n.d(e,"Element",function(){return wt}),n.d(e,"isWebGLEnabled",function(){return re}),n.d(e,"utils",function(){return Tt});n("34ef"),n("b54a"),n("f400"),n("7f7f"),n("4917"),n("1c4c"),n("ee1d"),n("fca0"),n("c5f6");var r,o,i,a=n("6bde"),u=(n("4f7f"),n("ac6a"),n("456d"),n("63d9"),n("cadf"),n("551c"),n("097d"),l),s=l,c=h,f="";function l(t,e,n){d(t,i,e,n),"DOMMouseScroll"==i&&d(t,"MozMousePixelScroll",e,n)}function h(t,e,n){m(t,i,e,n),"DOMMouseScroll"==i&&m(t,"MozMousePixelScroll",e,n)}function d(t,e,n,o){t[r](f+e,"wheel"==i?n:function(t){!t&&(t=window.event);var e={originalEvent:t,target:t.target||t.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==t.type?0:1,deltaX:0,deltaY:0,deltaZ:0,clientX:t.clientX,clientY:t.clientY,preventDefault:function(){t.preventDefault?t.preventDefault():t.returnValue=!1},stopPropagation:function(){t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){t.stopImmediatePropagation&&t.stopImmediatePropagation()}};return"mousewheel"==i?(e.deltaY=-.025*t.wheelDelta,t.wheelDeltaX&&(e.deltaX=-.025*t.wheelDeltaX)):e.deltaY=t.detail,n(e)},o||!1)}function m(t,e,n,r){t[o](f+e,n,r||!1)}function v(t,e){t&&t.addEventListener?(r="addEventListener",o="removeEventListener"):(r="attachEvent",o="detachEvent",f="on"),i=e?"onwheel"in e.createElement("div")?"wheel":void 0!==e.onmousewheel?"mousewheel":"DOMMouseScroll":"wheel"}v("undefined"!==typeof window&&window,"undefined"!==typeof document&&document),u.addWheelListener=s,u.removeWheelListener=c;var p=4,g=.001,y=1e-7,x=10,w=11,b=1/(w-1),E="function"===typeof Float32Array;function _(t,e){return 1-3*e+3*t}function T(t,e){return 3*e-6*t}function A(t){return 3*t}function P(t,e,n){return((_(e,n)*t+T(e,n))*t+A(e))*t}function S(t,e,n){return 3*_(e,n)*t*t+2*T(e,n)*t+A(e)}function C(t,e,n,r,o){var i,a,u=0;do{a=e+(n-e)/2,i=P(a,r,o)-t,i>0?n=a:e=a}while(Math.abs(i)>y&&++u<x);return a}function M(t,e,n,r){for(var o=0;o<p;++o){var i=S(e,n,r);if(0===i)return e;var a=P(e,n,r)-t;e-=a/i}return e}function R(t){return t}var L=function(t,e,n,r){if(!(0<=t&&t<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&n===r)return R;for(var o=E?new Float32Array(w):new Array(w),i=0;i<w;++i)o[i]=P(i*b,t,n);function a(e){for(var r=0,i=1,a=w-1;i!==a&&o[i]<=e;++i)r+=b;--i;var u=(e-o[i])/(o[i+1]-o[i]),s=r+u*b,c=S(s,t,n);return c>=g?M(e,s,t,n):0===c?s:C(e,r,r+b,t,n)}return function(t){return 0===t?0:1===t?1:P(a(t),e,r)}},F={ease:L(.25,.1,.25,1),easeIn:L(.42,0,1,1),easeOut:L(0,0,.58,1),easeInOut:L(.42,0,.58,1),linear:L(0,0,1,1)},k=B,D=z,I=z();function B(t,e,n){var r=Object.create(null),o=Object.create(null);n=n||{};var i="function"===typeof n.easing?n.easing:F[n.easing];i||(n.easing&&console.warn("Unknown easing function in amator: "+n.easing),i=F.ease);var a="function"===typeof n.step?n.step:N,u="function"===typeof n.done?n.done:N,s=Y(n.scheduler),c=Object.keys(e);c.forEach(function(n){r[n]=t[n],o[n]=e[n]-t[n]});var f,l="number"===typeof n.duration?n.duration:400,h=Math.max(1,.06*l),d=0;return f=s.next(v),{cancel:m};function m(){s.cancel(f),f=0}function v(){var e=i(d/h);d+=1,p(e),d<=h?(f=s.next(v),a(t)):(f=0,setTimeout(function(){u(t)},0))}function p(e){c.forEach(function(n){t[n]=o[n]*e+r[n]})}}function N(){}function Y(t){if(!t){var e="undefined"!==typeof window&&window.requestAnimationFrame;return e?O():X()}if("function"!==typeof t.next)throw new Error("Scheduler is supposed to have next(cb) function");if("function"!==typeof t.cancel)throw new Error("Scheduler is supposed to have cancel(handle) function");return t}function O(){return{next:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)}}function X(){return{next:function(t){return setTimeout(t,1e3/60)},cancel:function(t){return clearTimeout(t)}}}function z(){var t=new Set,e=new Set,n=0;return{next:o,cancel:o,clearAll:r};function r(){t.clear(),e.clear(),cancelAnimationFrame(n),n=0}function o(t){e.add(t),i()}function i(){n||(n=requestAnimationFrame(a))}function a(){n=0;var r=e;e=t,t=r,t.forEach(function(t){t()}),t.clear()}}k.makeAggregateRaf=D,k.sharedScheduler=I;var U=j;function j(t,e,n){"object"!==Object(a["a"])(n)&&(n={});var r,o,i,u,s,c,f,l,h,d,m="number"===typeof n.minVelocity?n.minVelocity:5,v="number"===typeof n.amplitude?n.amplitude:.25,p=342;return{start:y,stop:w,cancel:g};function g(){window.clearInterval(i),window.cancelAnimationFrame(d)}function y(){r=t(),c=h=u=f=0,o=new Date,window.clearInterval(i),window.cancelAnimationFrame(d),i=window.setInterval(x,100)}function x(){var e=Date.now(),n=e-o;o=e;var i=t(),a=i.x-r.x,s=i.y-r.y;r=i;var c=1e3/(1+n);u=.8*a*c+.2*u,f=.8*s*c+.2*f}function w(){window.clearInterval(i),window.cancelAnimationFrame(d);var e=t();s=e.x,l=e.y,o=Date.now(),(u<-m||u>m)&&(c=v*u,s+=c),(f<-m||f>m)&&(h=v*f,l+=h),d=window.requestAnimationFrame(b)}function b(){var t=Date.now()-o,n=!1,r=0,i=0;c&&(r=-c*Math.exp(-t/p),r>.5||r<-.5?n=!0:r=c=0),h&&(i=-h*Math.exp(-t/p),i>.5||i<-.5?n=!0:i=h=0),n&&(e(s+r,l+i),d=window.requestAnimationFrame(b))}}var W=V,q="function"!==typeof Event;function V(t){if(q){var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!0,!0,void 0),e}return new Event(t,{bubbles:!0})}var G=H;function H(){var t,e,n;return{capture:r,release:o};function r(r){e=window.document.onselectstart,n=window.document.ondragstart,window.document.onselectstart=Z,t=r,t.ondragstart=Z}function o(){window.document.onselectstart=e,t&&(t.ondragstart=n)}}function Z(t){return t.stopPropagation(),!1}var J=$;function $(){this.x=0,this.y=0,this.scale=1}var K=Q;function Q(t){var e=t instanceof SVGElement;if(!e)throw new Error("svg element is required for svg.panzoom to work");var n=t.ownerSVGElement;if(!n)throw new Error("Do not apply panzoom to the root <svg> element. Use its child instead (e.g. <g></g>). As of March 2016 only FireFox supported transform on the root element");n.setAttribute("tabindex",1);var r={getBBox:i,getScreenCTM:a,getOwner:o,applyTransform:s,initTransform:u};return r;function o(){return n}function i(){var e=t.getBBox();return{left:e.x,top:e.y,width:e.width,height:e.height}}function a(){return n.getScreenCTM()}function u(e){var r=t.getScreenCTM();e.x=r.e,e.y=r.f,e.scale=r.a,n.removeAttributeNS(null,"viewBox")}function s(e){t.setAttribute("transform","matrix("+e.scale+" 0 0 "+e.scale+" "+e.x+" "+e.y+")")}}var tt=et;function et(t){var e=t instanceof HTMLElement;if(!e)throw new Error("svg element is required for svg.panzoom to work");var n=t.parentElement;if(!n)throw new Error("Do not apply panzoom to the detached DOM element. ");t.scrollTop=0,n.setAttribute("tabindex",1);var r={getBBox:i,getOwner:o,applyTransform:a};return r;function o(){return n}function i(){return{left:0,top:0,width:t.clientWidth,height:t.clientHeight}}function a(e){t.style.transformOrigin="0 0 0",t.style.transform="matrix("+e.scale+", 0, 0, "+e.scale+", "+e.x+", "+e.y+")"}}var nt=G(),rt=.065,ot=1.75,it=300,at=ut;function ut(t,e){e=e||{};var n=e.controller;if(n||(t instanceof SVGElement&&(n=K(t)),t instanceof HTMLElement&&(n=tt(t))),!n)throw new Error("Cannot create panzoom for the current type of dom element");var r=n.getOwner(),o={x:0,y:0},i=!1,a=new J;n.initTransform&&n.initTransform(a);var s,c="boolean"===typeof e.realPinch&&e.realPinch,f=e.bounds,l="number"===typeof e.maxZoom?e.maxZoom:Number.POSITIVE_INFINITY,h="number"===typeof e.minZoom?e.minZoom:0,d="number"===typeof e.boundsPadding?e.boundsPadding:.05,m="number"===typeof e.zoomDoubleClickSpeed?e.zoomDoubleClickSpeed:ot,v=e.beforeWheel||st,p="number"===typeof e.zoomSpeed?e.zoomSpeed:rt;ct(f),e.autocenter&&D();var g,y,x,w,b,E,_,T=0,A=!1,P=!1;w="smoothScroll"in e&&!e.smoothScroll?ht():U(B,$,e.smoothScroll);var S=!1;return et(),{dispose:Q,moveBy:Z,moveTo:N,centerOn:H,zoomTo:Rt,zoomAbs:G,smoothZoom:Mt,getTransform:I,showRectangle:L,pause:C,resume:M,isPaused:R};function C(){at(),S=!0}function M(){S&&(console.log("resujme"),et(),S=!1)}function R(){return S}function L(t){var e=F(r.clientWidth,r.clientHeight),n=t.right-t.left,o=t.bottom-t.top;if(!Number.isFinite(n)||!Number.isFinite(o))throw new Error("Invalid rectangle");var i=e.x/n,u=e.y/o,s=Math.min(i,u);a.x=-(t.left+n/2)*s+e.x/2,a.y=-(t.top+o/2)*s+e.y/2,a.scale=s}function F(t,e){if(n.getScreenCTM){var r=n.getScreenCTM(),i=r.a,a=r.d,u=r.e,s=r.f;o.x=t*i-u,o.y=e*a-s}else o.x=t,o.y=e;return o}function D(){var t,e,o=0,i=0,u=X();if(u)o=u.left,i=u.top,t=u.right-u.left,e=u.bottom-u.top;else{var s=r.getBoundingClientRect();t=s.width,e=s.height}var c=n.getBBox();if(0!==c.width&&0!==c.height){var f=e/c.height,l=t/c.width,h=Math.min(l,f);a.x=-(c.left+c.width/2)*h+t/2+o,a.y=-(c.top+c.height/2)*h+e/2+i,a.scale=h}}function I(){return a}function B(){return{x:a.x,y:a.y}}function N(t,e){a.x=t,a.y=e,O(),It("pan"),q()}function Y(t,e){N(a.x+t,a.y+e)}function O(){var t=X();if(t){var e=!1,n=z(),r=t.left-n.right;return r>0&&(a.x+=r,e=!0),r=t.right-n.left,r<0&&(a.x+=r,e=!0),r=t.top-n.bottom,r>0&&(a.y+=r,e=!0),r=t.bottom-n.top,r<0&&(a.y+=r,e=!0),e}}function X(){if(f){if("boolean"===typeof f){var t=r.getBoundingClientRect(),e=t.width,n=t.height;return{left:e*d,top:n*d,right:e*(1-d),bottom:n*(1-d)}}return f}}function z(){var t=n.getBBox(),e=j(t.left,t.top);return{left:e.x,top:e.y,right:t.width*a.scale+e.x,bottom:t.height*a.scale+e.y}}function j(t,e){return{x:t*a.scale+a.x,y:e*a.scale+a.y}}function q(){i=!0,s=window.requestAnimationFrame(ut)}function V(t,e,n){if(lt(t)||lt(e)||lt(n))throw new Error("zoom requires valid numbers");var r=a.scale*n;if(r<h){if(a.scale===h)return;n=h/a.scale}if(r>l){if(a.scale===l)return;n=l/a.scale}var o=F(t,e);a.x=o.x-n*(o.x-a.x),a.y=o.y-n*(o.y-a.y);var i=O();i||(a.scale*=n),It("zoom"),q()}function G(t,e,n){var r=n/a.scale;V(t,e,r)}function H(t){var e=t.ownerSVGElement;if(!e)throw new Error("ui element is required to be within the scene");var n=t.getBoundingClientRect(),r=n.left+n.width/2,o=n.top+n.height/2,i=e.getBoundingClientRect(),a=i.width/2-r,u=i.height/2-o;Z(a,u,!0)}function Z(t,e,n){if(!n)return Y(t,e);b&&b.cancel();var r={x:0,y:0},o={x:t,y:e},i=0,a=0;b=k(r,o,{step:function(t){Y(t.x-i,t.y-a),i=t.x,a=t.y}})}function $(t,e){Lt(),N(t,e)}function Q(){at()}function et(){r.addEventListener("mousedown",Et),r.addEventListener("dblclick",bt),r.addEventListener("touchstart",mt),r.addEventListener("keydown",dt),u.addWheelListener(r,St),q()}function at(){u.removeWheelListener(r,St),r.removeEventListener("mousedown",Et),r.removeEventListener("keydown",dt),r.removeEventListener("dblclick",bt),r.removeEventListener("touchstart",mt),s&&(window.cancelAnimationFrame(s),s=0),w.cancel(),At(),Pt(),Dt()}function ut(){i&&ft()}function ft(){i=!1,n.applyTransform(a),It("transform"),s=0}function dt(t){var e=0,n=0,o=0;if(38===t.keyCode?n=1:40===t.keyCode?n=-1:37===t.keyCode?e=1:39===t.keyCode?e=-1:189===t.keyCode||109===t.keyCode?o=1:187!==t.keyCode&&107!==t.keyCode||(o=-1),e||n){t.preventDefault(),t.stopPropagation();var i=r.getBoundingClientRect(),a=Math.min(i.width,i.height),u=.05,s=a*u*e,c=a*u*n;Z(s,c)}if(o){var f=Ft(o),l=r.getBoundingClientRect();Rt(l.width/2,l.height/2,f)}}function mt(t){if(vt(t),1===t.touches.length)return pt(t,t.touches[0]);2===t.touches.length&&(x=wt(t.touches[0],t.touches[1]),_=!0,gt())}function vt(t){e.onTouch&&!e.onTouch(t)||(t.stopPropagation(),t.preventDefault())}function pt(t){var e=t.touches[0],n=Ct(e);g=n.x,y=n.y,gt()}function gt(){A||(A=!0,document.addEventListener("touchmove",yt),document.addEventListener("touchend",xt),document.addEventListener("touchcancel",xt))}function yt(t){if(1===t.touches.length){t.stopPropagation();var e=t.touches[0],n=Ct(e),r=n.x-g,o=n.y-y;0!==r&&0!==o&&kt(),g=n.x,y=n.y;var i=F(r,o);Z(i.x,i.y)}else if(2===t.touches.length){_=!0;var a=t.touches[0],u=t.touches[1],s=wt(a,u),f=1;if(c)f=s/x;else{var l=0;s<x?l=1:s>x&&(l=-1),f=Ft(l)}g=(a.clientX+u.clientX)/2,y=(a.clientY+u.clientY)/2,Rt(g,y,f),x=s,t.stopPropagation(),t.preventDefault()}}function xt(t){if(t.touches.length>0){var e=Ct(t.touches[0]);g=e.x,y=e.y}else{var n=new Date;n-T<it&&Mt(g,y,m),T=n,A=!1,Dt(),Pt()}}function wt(t,e){return Math.sqrt((t.clientX-e.clientX)*(t.clientX-e.clientX)+(t.clientY-e.clientY)*(t.clientY-e.clientY))}function bt(t){var e=Ct(t);Mt(e.x,e.y,m),t.preventDefault(),t.stopPropagation()}function Et(t){if(A)return t.stopPropagation(),!1;var e=1===t.button&&null!==window.event||0===t.button;if(e){var n=Ct(t),r=F(n.x,n.y);return g=r.x,y=r.y,document.addEventListener("mousemove",_t),document.addEventListener("mouseup",Tt),nt.capture(t.target||t.srcElement),!1}}function _t(t){if(!A){kt();var e=Ct(t),n=F(e.x,e.y),r=n.x-g,o=n.y-y;g=n.x,y=n.y,Z(r,o)}}function Tt(){nt.release(),Dt(),At()}function At(){document.removeEventListener("mousemove",_t),document.removeEventListener("mouseup",Tt),P=!1}function Pt(){document.removeEventListener("touchmove",yt),document.removeEventListener("touchend",xt),document.removeEventListener("touchcancel",xt),P=!1,_=!1}function St(t){if(!v(t)){w.cancel();var e=Ft(t.deltaY);if(1!==e){var n=Ct(t);Rt(n.x,n.y,e),t.preventDefault()}}}function Ct(t){var e,n,o=r.getBoundingClientRect();return e=t.clientX-o.left,n=t.clientY-o.top,{x:e,y:n}}function Mt(t,e,n){var r=a.scale,o={scale:r},i={scale:n*r};w.cancel(),Lt(),It("zoom"),E=k(o,i,{step:function(n){G(t,e,n.scale)}})}function Rt(t,e,n){return w.cancel(),Lt(),V(t,e,n)}function Lt(){E&&(E.cancel(),E=null)}function Ft(t){var e=1;return t>0?e=1-p:t<0&&(e=1+p),e}function kt(){P||(It("panstart"),P=!0,w.start())}function Dt(){P&&(_||w.stop(),It("panend"))}function It(e){var n=W(e);t.dispatchEvent(n)}}function st(){}function ct(t){var e=Object(a["a"])(t);if("undefined"!==e&&"boolean"!==e){var n=ft(t.left)&&ft(t.top)&&ft(t.bottom)&&ft(t.right);if(!n)throw new Error("Bounds object is not valid. It can be: undefined, boolean (true|false) or an object {left, top, right, bottom}")}}function ft(t){return Number.isFinite(t)}function lt(t){return Number.isNaN?Number.isNaN(t):t!==t}function ht(){return{start:st,stop:st,cancel:st}}function dt(){if("undefined"!==typeof document){var t,e=document.getElementsByTagName("script");if(e)if(Array.from(e).forEach(function(e){e.src&&e.src.match(/\bpanzoom(\.min)?\.js/)&&(t=e)}),t){var n=t.getAttribute("query");if(n){var r=t.getAttribute("name")||"pz",o=Date.now();i()}}}function i(){var e=document.querySelector(n);if(!e){var u=Date.now(),s=u-o;return s<2e3?void setTimeout(i,100):void console.error("Cannot find the panzoom element",r)}var c=a(t);console.log(c),window[r]=ut(e,c)}function a(t){for(var e=t.attributes,n={},r=0;r<e.length;++r){var o=e[r],i=u(o);i&&(n[i.name]=i.value)}return n}function u(t){if(t.name){var e="p"===t.name[0]&&"z"===t.name[1]&&"-"===t.name[2];if(e){var n=t.name.substr(3),r=JSON.parse(t.value);return{name:n,value:r}}}}}dt();var mt=function(t){pt(t);var e=vt(t);return t.on=e.on,t.off=e.off,t.fire=e.fire,t};function vt(t){var e=Object.create(null);return{on:function(n,r,o){if("function"!==typeof r)throw new Error("callback is expected to be a function");var i=e[n];return i||(i=e[n]=[]),i.push({callback:r,ctx:o}),t},off:function(n,r){var o="undefined"===typeof n;if(o)return e=Object.create(null),t;if(e[n]){var i="function"!==typeof r;if(i)delete e[n];else for(var a=e[n],u=0;u<a.length;++u)a[u].callback===r&&a.splice(u,1)}return t},fire:function(n){var r,o=e[n];if(!o)return t;arguments.length>1&&(r=Array.prototype.splice.call(arguments,1));for(var i=0;i<o.length;++i){var a=o[i];a.callback.apply(a.ctx,r)}return t}}}function pt(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],n=0;n<e.length;++n)if(t.hasOwnProperty(e[n]))throw new Error("Subject cannot be eventified, since it already has property '"+e[n]+"'")}var gt=function(t,e,n){t=t||1,e=e||0,n=n||0,this._array=[t,0,0,0,0,t,0,0,0,0,1,0,e,n,0,1]},yt={scale:{},dx:{},dy:{}};function xt(t,e){if(t.length!==e.length)throw new Error("Array length mismatch");for(var n=0;n<t.length;++n)e[n]=t[n]}gt.prototype.multiply=function(t,e){var n=t.scale*e.scale,r=t.scale*e.dx+t.dx,o=t.scale*e.dy+t.dy;return this.scale=n,this.dx=r,this.dy=o,this},yt.scale.get=function(){return this._array[0]},yt.dx.get=function(){return this._array[12]},yt.dy.get=function(){return this._array[13]},yt.dx.set=function(t){this._array[12]=t},yt.dy.set=function(t){this._array[13]=t},yt.scale.set=function(t){this._array[0]=t,this._array[5]=t},gt.prototype.copyTo=function(t){return xt(this._array,t._array),this},gt.prototype.getArray=function(){return this._array},Object.defineProperties(gt.prototype,yt);var wt=function(){this.children=[],this.transform=new gt,this.worldTransform=new gt,this.worldTransformNeedsUpdate=!0,this.type="Element",this.scene=null};wt.prototype.appendChild=function(t,e){t.parent=this,e?this.children.unshift(t):this.children.push(t),t.bindScene&&t.bindScene(this.scene),this.scene&&this.scene.renderFrame()},wt.prototype.bindScene=function(t){this.scene=t},wt.prototype.traverse=function(t,e){var n=this;t(this);for(var r=0;r<this.children.length;++r){var o=n.children[r];o.traverse(t,e)}e&&e(this)},wt.prototype.removeChild=function(t){var e=this.children.indexOf(t);e>-1&&this.children.splice(e,1),this.scene&&this.scene.renderFrame()},wt.prototype.updateWorldTransform=function(t){(this.worldTransformNeedsUpdate||t)&&(this.parent?this.worldTransform.multiply(this.parent.worldTransform,this.transform):this.transform.copyTo(this.worldTransform),this.worldTransformNeedsUpdate=!1,t=!0);for(var e=t,n=this.children,r=0;r<n.length;r++)e=n[r].updateWorldTransform(t)||e;return e},wt.prototype.draw=function(t,e){for(var n=this,r=0;r<this.children.length;++r){var o=n.children[r];o.draw(t,e)}},wt.prototype.dispose=function(){for(var t=this,e=0;e<this.children.length;++e){var n=t.children[e];n.dispose()}};var bt={maxSingleTouchTime:300,singleTapDistanceSquared:25};function Et(t,e,n){var r,o=new Date;return t.addEventListener("click",s),t.addEventListener("touchend",a),t.addEventListener("touchstart",i),u;function i(t){var e=t.touches;1===e.length&&(o=new Date,r={x:t.touches[0].pageX,y:t.touches[0].pageY})}function a(t){if(!(t.touches.length>1)){var e=new Date-o;if(!(e>bt.maxSingleTouchTime)){var n=t.changedTouches[0],i=n.pageX-r.x,a=n.pageY-r.y;i*i+a*a<bt.singleTapDistanceSquared&&s(n)}}}function u(){t.removeEventListener("click",s),t.removeEventListener("touchend",a),t.removeEventListener("touchstart",i)}function s(t){e.call(n,t)}}function _t(t,e){var n,r,o={width:0,height:0},i=window.devicePixelRatio;e||(e={});var a=e.wglContext,u=t.getContext("webgl",a)||t.getContext("experimental-webgl",a);u.blendFunc(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA),u.enable(u.BLEND),u.clearColor(0,0,0,1),u.clear(u.COLOR_BUFFER_BIT);var s=0,c=new wt;E();var f,l=mt({appendChild:L,getSceneCoordinate:P,getClientCoordinate:S,getTransform:g,getRoot:p,removeChild:F,setViewBox:C,setClearColor:y,dispose:w,renderFrame:M,getPixelRatio:m,setPixelRatio:v}),h=k(t,c,l),d=at(t,{zoomSpeed:.025,controller:h});return c.bindScene(l),x(),M(),l;function m(){return i}function v(t){i=t,E()}function p(){return c}function g(){return c.transform}function y(t,e,n,r){u.clearColor(t,e,n,r)}function x(){t.addEventListener("mousemove",A),t.addEventListener("transform",_),f=Et(t,T,this),window.addEventListener("resize",b,!0)}function w(){t.removeEventListener("mousemove",A),t.removeEventListener("transform",_),f&&f(),window.removeEventListener("resize",b,!0),d.dispose(),c.dispose(),s&&(cancelAnimationFrame(s),s=0)}function b(){E()}function E(){e.size?(n=t.width=e.size.width,r=t.height=e.size.height):(n=t.width=t.offsetWidth*i,r=t.height=t.offsetHeight*i),u.viewport(0,0,n,r),o.width=n,o.height=r,c.worldTransformNeedsUpdate=!0,M()}function _(t){l.fire("transform",t)}function T(t){var e=P(t.clientX,t.clientY);l.fire("click",{originalEvent:t,sceneX:e.x,sceneY:e.y})}function A(t){var e=P(t.clientX,t.clientY);l.fire("mousemove",{originalEvent:t,sceneX:e.x,sceneY:e.y})}function P(t,e){var n=c.transform,r=t*i,o=e*i,a=(r-n.dx)/n.scale,u=(o-n.dy)/n.scale;return{x:a,y:u}}function S(t,e){var n=c.transform,r=(t*n.scale+n.dx)/i,o=(e*n.scale+n.dy)/i;return{x:r,y:o}}function C(t){d.showRectangle(t,{width:n,height:r});var e=d.getTransform();h.applyTransform(e)}function M(){s||(s=requestAnimationFrame(R))}function R(){u.clear(u.COLOR_BUFFER_BIT),o.wasDirty=c.updateWorldTransform(),c.draw(u,o),s=0}function L(t,e){c.appendChild(t,e)}function F(t){c.removeChild(t)}function k(t,n,r){var o={applyTransform:function(t){var e=n.transform,o=r.getPixelRatio();e.dx=t.x*o,e.dy=t.y*o,e.scale=t.scale,n.worldTransformNeedsUpdate=!0,r.renderFrame()},getOwner:function(){return t}};return e.size&&(o.getScreenCTM=i),o;function i(){return{a:e.size.width/t.offsetWidth,d:e.size.height/t.offsetHeight,e:0,f:0}}}}var Tt={compile:At,link:Pt,getLocations:St,getAttributes:Ct,getUniforms:Mt,initBuffer:Rt};function At(t,e,n){var r=t.createShader(e);if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(r));return r}function Pt(t,e,n){var r=t.createProgram();if(t.attachShader(r,e),t.attachShader(r,n),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS))throw new Error(t.getProgramInfoLog(r));return r}function St(t,e){return{attributes:Ct(t,e),uniforms:Mt(t,e)}}function Ct(t,e){for(var n=Object.create(null),r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),o=0;o<r;++o){var i=t.getActiveAttrib(e,o).name;n[i]=t.getAttribLocation(e,i)}return n}function Mt(t,e){for(var n=Object.create(null),r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),o=0;o<r;++o){var i=t.getActiveUniform(e,o).name;n[i]=t.getUniformLocation(e,i)}return n}function Rt(t,e,n,r){var o=t.createBuffer();if(!o)throw new Error("Failed to create a buffer");t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.vertexAttribPointer(r,n,t.FLOAT,!1,0,0),t.enableVertexAttribArray(r)}var Lt={getVSCode:Ft};function Ft(t){var e=[];return t.forEach(function(t){t.globals&&e.push(t.globals())}),e.push("void main() {"),t.forEach(function(t){t.mainBody&&e.push(t.mainBody())}),e.push("}"),e.join("\n")}var kt={globals:function(){return"\nattribute vec2 aPosition;\nuniform vec2 uScreenSize;\nuniform mat4 uTransform;\n"},mainBody:function(){return"\n  mat4 transformed = mat4(uTransform);\n\n  // Translate screen coordinates to webgl space\n  vec2 vv = 2.0 * uTransform[3].xy/uScreenSize;\n  transformed[3][0] = vv.x - 1.0;\n  transformed[3][1] = 1.0 - vv.y;\n  vec2 xy = 2.0 * aPosition/uScreenSize;\n  gl_Position = transformed * vec4(xy.x, -xy.y, 0.0, 1.0);\n"}},Dt={globals:function(){return"\nattribute float aPointSize;\nattribute vec4 aColor;\nvarying vec4 vColor;\n"},mainBody:function(){return"\n  gl_PointSize = aPointSize * transformed[0][0];\n  vColor = aColor;\n"}},It=Lt.getVSCode([kt,Dt]),Bt="\nprecision highp float;\nvarying vec4 vColor;\nuniform sampler2D texture;\n\nvoid main() {\n  vec4 tColor = texture2D( texture, gl_PointCoord );\n  gl_FragColor = vec4(vColor.rgb, tColor.a);\n  //gl_FragColor = vec4(vColor.rgb, 1.0);\n  // vec2 t = 2.0 * gl_PointCoord - 1.0;\n  // float a = 1.0 - pow(t.x, 2.0) - pow(t.y, 2.0);\n  // gl_FragColor = vec4(vColor.rgb, a);\n}\n",Nt=new Map;function Yt(t,e){var n=Nt.get(t);if(!n){var r=Tt.compile(t,t.VERTEX_SHADER,It),o=Tt.compile(t,t.FRAGMENT_SHADER,Bt);n=Tt.link(t,r,o),Nt.set(t,n)}var i=Tt.getLocations(t,n),a=t.createBuffer();if(!a)throw new Error("failed to create a nodesBuffer");t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,e.byteLength,t.DYNAMIC_DRAW);var u=Ot(t),s={draw:l,updateData:c,dispose:f};return s;function c(t){e=t}function f(){t.deleteProgram(n),t.deleteTexture(u),Nt.delete(t)}function l(r,o,s){t.useProgram(n);var c=e.BYTES_PER_ELEMENT;r&&t.uniformMatrix4fv(i.uniforms.uTransform,!1,r.getArray()),t.uniform2f(i.uniforms.uScreenSize,o.width,o.height),t.bindTexture(t.TEXTURE_2D,u),t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,e,t.DYNAMIC_DRAW),t.vertexAttribPointer(i.attributes.aPosition,2,t.FLOAT,!1,6*c,0),t.enableVertexAttribArray(i.attributes.aPosition),t.vertexAttribPointer(i.attributes.aPointSize,1,t.FLOAT,!1,6*c,2*c),t.enableVertexAttribArray(i.attributes.aPointSize),t.vertexAttribPointer(i.attributes.aColor,3,t.FLOAT,!1,6*c,3*c),t.enableVertexAttribArray(i.attributes.aColor),t.drawArrays(t.POINTS,0,s)}}function Ot(t){var e=t.createTexture();if(!e)throw new Error("Failed to create circle texture");t.bindTexture(t.TEXTURE_2D,e);var n=64,r=o(n);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,n,0,t.RGBA,t.UNSIGNED_BYTE,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.generateMipmap(t.TEXTURE_2D),e;function o(t){for(var e=new Uint8Array(t*t*4),n=(t-8)/2,r=0;r<t;++r)for(var o=r*t,i=0;i<t;++i){var a=4*(o+i),u=r-n,s=i-n,c=Math.sqrt(s*s+u*u);if(c<n){var f=1-c/n;e[a+3]=f>.3?255:255*f}else e[a+3]=0}return Xt(e,t)}}function Xt(t,e){for(var n=new Uint8Array(e*e*4),r=0;r<e;++r)for(var o=0;o<e;++o)n[4*(r*e+o)+3]=zt(r,o,3,t,e);return n}function zt(t,e,n,r,o){for(var i=0,a=0,u=t-n;u<t+n;++u)if(!(u<0||u>=o))for(var s=e-n;s<e+n;++s)s<0||s>=o||(i+=r[4*(u*o+s)+3],a+=1);return i/a}var Ut=function(t,e,n,r){this.r=t,this.g=e,this.b=n,this.a=void 0===r?1:r},jt=function(t,e,n,r){this.offset=e,this.buffer=t,this.color=n||new Ut(1,1,1,1),void 0!==r&&(this.data=r)},Wt={x:{},y:{}};Wt.x.get=function(){return this.buffer[this.offset]},Wt.y.get=function(){return this.buffer[this.offset+1]},jt.prototype.update=function(t,e){var n=this.offset,r=this.buffer;r[n+0]=t.x,r[n+1]=t.y,(t.size||e)&&(r[n+2]="number"===typeof t.size?t.size:e.size),this.setColor(this.color)},jt.prototype.setColor=function(t){this.color=t,this.buffer[this.offset+3]=t.r,this.buffer[this.offset+4]=t.g,this.buffer[this.offset+5]=t.b},Object.defineProperties(jt.prototype,Wt);var qt=6,Vt=function(t){function e(e){t.call(this),this.type="PointCollection",this.pointsAccessor=[],this.capacity=e,this.pointsBuffer=new Float32Array(e*qt),this.count=0,this._program=null,this.color=new Ut(1,1,1,1),this.size=1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.draw=function(t,e){this._program||(this._program=Yt(t,this.pointsBuffer)),this._program.draw(this.worldTransform,e,this.count)},e.prototype.dispose=function(){this._program&&(this._program.dispose(),this._program=null)},e.prototype.add=function(t,e){if(!t)throw new Error("Point is required");this.count>=this.capacity&&this._extendArray();var n=this.pointsBuffer,r=this.count,o=r*qt,i=new jt(n,o,t.color||this.color,e);return this.pointsAccessor.push(i),i.update(t,this),this.count+=1,i},e.prototype._extendArray=function(){throw new Error("Cannot extend array at the moment :(")},e}(wt),Gt=function(t,e,n){if(Number.isNaN(t))throw new Error("x is not a number");if(Number.isNaN(e))throw new Error("y is not a number");this.x=t,this.y=e,this.color=new Ut(255,255,255),this.size=Number.isFinite(n)?n:4},Ht=function(t){function e(e,n){t.call(this),this.itemsPerLine=n,this.capacity=e,this.count=0,this._program=null,this.color=new Ut(1,1,1,1),this.buffer=new Float32Array(e*this.itemsPerLine)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.draw=function(t,e){this._program||(this._program=this._makeProgram(t));var n=this.worldTransform;this._program.draw(n,this.color,e)},e.prototype._makeProgram=function(){throw new Error("Not implemented")},e.prototype._addInternal=function(){throw new Error("Not implemented")},e.prototype.add=function(t){if(!t)throw new Error("Line is required");this.count>=this.capacity&&this._extendArray();var e=this.count*this.itemsPerLine,n=this._addInternal(t,e);return this.count+=1,n},e.prototype.dispose=function(){this._program&&(this._program.dispose(),this._program=null)},e.prototype._extendArray=function(){var t=this.capacity*this.itemsPerLine*2,e=new Float32Array(t);this.buffer&&e.set(this.buffer),this.buffer=e,this.capacity=t},e}(wt),Zt=Lt.getVSCode([kt]),Jt="\nprecision highp float;\nuniform vec4 uColor;\n\nvoid main() {\n  gl_FragColor = uColor;\n}\n",$t=new Map;function Kt(t,e,n){var r=$t.get(t);if(!r){var o=Tt.compile(t,t.VERTEX_SHADER,Zt),i=Tt.compile(t,t.FRAGMENT_SHADER,Jt);r=Tt.link(t,o,i),$t.set(t,r)}var a=Tt.getLocations(t,r),u=t.createBuffer(),s=e.BYTES_PER_ELEMENT,c=n?t.TRIANGLES:t.LINES;t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,e.byteLength,t.STATIC_DRAW),t.bufferSubData(t.ARRAY_BUFFER,0,e);var f={draw:h,dispose:l};return f;function l(){t.deleteBuffer(u),t.deleteProgram(r),$t.delete(t)}function h(n,o,i){0!==e.length&&(t.useProgram(r),t.uniformMatrix4fv(a.uniforms.uTransform,!1,n.getArray()),t.uniform2f(a.uniforms.uScreenSize,i.width,i.height),t.uniform4f(a.uniforms.uColor,o.r,o.g,o.b,o.a),t.bindBuffer(t.ARRAY_BUFFER,u),t.enableVertexAttribArray(a.attributes.aPosition),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.vertexAttribPointer(a.attributes.aPosition,2,t.FLOAT,!1,2*s,0),t.drawArrays(c,0,e.length/2))}}var Qt=function(t,e){this.offset=e,this.buffer=t,this.width=1};Qt.prototype.setWidth=function(t){this.width=t},Qt.prototype.update=function(t,e){var n=this.buffer,r=this.offset,o=e.x-t.x,i=e.y-t.y;0===o&&(o=1e-4),0===i&&(i=1e-4);var a=Math.sqrt(o*o+i*i),u=o/a,s=i/a,c=this.width,f=c*u,l=c*s,h=t.x+l,d=t.y-f,m=e.x+l,v=e.y-f,p=t.x-l,g=t.y+f,y=e.x-l,x=e.y+f;n[r+0]=h,n[r+1]=d,n[r+2]=m,n[r+3]=v,n[r+4]=p,n[r+5]=g,r+=6,n[r+0]=m,n[r+1]=v,n[r+2]=p,n[r+3]=g,n[r+4]=y,n[r+5]=x};var te=function(t){function e(e){t.call(this,e,12),this.type="LineCollection"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._makeProgram=function(t){return Kt(t,this.buffer,!0)},e.prototype._addInternal=function(t,e){var n=new Qt(this.buffer,e);return n.update(t.from,t.to),n},e}(Ht),ee=function(t,e){this.offset=e,this.buffer=t};ee.prototype.update=function(t,e){var n=this.buffer,r=this.offset;n[r+0]=t.x,n[r+1]=t.y,n[r+2]=e.x,n[r+3]=e.y};var ne=function(t){function e(e){t.call(this,e,4),this.type="WireCollection"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._makeProgram=function(t){return Kt(t,this.buffer,!1)},e.prototype._addInternal=function(t,e){var n=new ee(this.buffer,e);return n.update(t.from,t.to),n},e}(Ht);function re(t){try{return!!window.WebGLRenderingContext&&(t||(t=document.createElement("canvas")),!(!t.getContext("webgl")&&!t.getContext("experimental-webgl")))}catch(t){return!1}}}});
//# sourceMappingURL=app.93dda6ae.js.map